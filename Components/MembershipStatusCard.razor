<div class="card membership-status-card">
    <div class="card-body">
        <h4 class="card-title">Membership Status</h4>
        <div class="mb-3">
            <span class="membership-status-badge @GetStatusCssClass(Status)">
                @Status
            </span>
        </div>
        <p>Expiry Date: @ExpiryDate.ToShortDateString()</p>
        <p>Days Remaining: @(ExpiryDate - DateTime.Now).Days</p>
        <button class="btn btn-primary"
                @onclick="OnRenewClicked"
                disabled="@(Status.ToLower() == "expired")">
            Renew Now
        </button>
    </div>
</div>

@code {
    [Parameter]
    public string Status { get; set; } = "Unknown";

    [Parameter]
    public DateTime ExpiryDate { get; set; } = DateTime.Now;

    [Parameter]
    public EventCallback OnRenew { get; set; }

    private async Task OnRenewClicked()
    {
        if (OnRenew.HasDelegate)
        {
            await OnRenew.InvokeAsync();
        }
    }

    private string GetStatusCssClass(string status)
    {
        return status.ToLower() switch
        {
            "active" => "status-active",
            "expiring" => "status-expiring",
            "expired" => "status-expired",
            _ => "status-expiring"
        };
    }
}
